{% extends "base.html" %}
{% block content %}
<h2 class="mb-4">–°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–º–æ–±—ñ–ª—ñ–≤</h2>

<form class="mb-3" method="get" action="/">
  <div class="input-group">
    <input type="text" class="form-control" name="q" placeholder="–ü–æ—à—É–∫ –∑–∞ –Ω–æ–º–µ—Ä–æ–º..." value="{{ request.args.get('q', '') }}">
    <button class="btn btn-outline-secondary" type="submit">–ü–æ—à—É–∫</button>
    <a href="{{ url_for('add_car') }}" class="btn btn-primary ms-2">+ –î–æ–¥–∞—Ç–∏</a>
    <a href="{{ url_for('run_external') }}" class="btn btn-primary ms-2">üöÄ –û–Ω–æ–≤–∏—Ç–∏ –≤ —Ö–º–∞—Ä—ñ</a>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</form>

<div class="container-fluid mt-3">
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="position-fixed top-0 end-0 p-3" style="z-index:1050;">
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="–ó–∞–∫—Ä–∏—Ç–∏"></button>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}
<div>
<table class="table table-bordered table-striped table-sm">
  <thead class="table-dark">
    <tr>
      <th>ID</th>
      <th>–í—ñ–π—Å—å–∫–æ–≤–∏–π –Ω–æ–º–µ—Ä</th>
      <th>–¢–∏–ø</th>
      <th>–ú–∞—Ä–∫–∞</th>
      <th>–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª</th>
      <th>–°—Ç–∞—Ç—É—Å</th>
      <th>–°—Ç–∞–Ω</th>
      <th>–ú—ñ—Å—Ü—å</th>
      <th>–ö–æ–ª—ñ—Å–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞</th>
      <th>–í–æ–¥—ñ–π</th>
      <th>–†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è</th>
      <th>–ü—Ä–∏–º—ñ—Ç–∫–∏</th>
      <th>–î—ñ—ó</th>
    </tr>
  </thead>
  <tbody>
    {% for car in cars %}
    <tr>
      <td>{{ car[0] }}</td>
      <td>{{ car[1] }}</td>
      <td>{{ car[2] }}</td>
      <td>{{ car[3] }}</td>
      <td>{{ car[4] }}</td>
      <td>{{ car[5] }}</td>
      <td>{{ car[6] }}</td>
      <td>{{ car[7] }}</td>
      <td>{{ car[8] }}</td>
      <td>{{ car[9] }}</td>
      <td>{{ car[10] }}</td>
      <td>{{ car[11] }}</td>
      <td>
        <a href="{{ url_for('edit_car', id=car[0]) }}" class="btn btn-sm btn-warning">‚úèÔ∏è</a>
        <a href="{{ url_for('delete_car', id=car[0]) }}" class="btn btn-sm btn-danger" onclick="return confirm('–í–∏–¥–∞–ª–∏—Ç–∏?')">üóë</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
